# 🎪 お祭り会場設定ガイド（Unity担当者向け）

## 📏 **会場サイズの設定**

### 1️⃣ **基本的な考え方**

```
お祭り会場は「円形」で設計されています
中央に広場があり、その周りに屋台が配置される想定

    射的          ステージ前         わたあめ屋台
      ●              ●                ●
         ＼          ｜              ／
           ＼        ｜            ／
休憩所 ●――――――● 中央広場 ●――――――● ドリンク屋台
           ／        ｜            ＼
         ／          ｜              ＼
      ●              ●                ●
   たこ焼き      花火スポット      金魚すくい
```

### 2️⃣ **展示環境別の推奨設定**

| 展示環境 | 会場半径 | 画面から見た印象 |
|----------|----------|------------------|
| **小型モニター** (24-32インチ) | **8-12m** | キャラがちょうど良いサイズ |
| **大型ディスプレイ** (55インチ以上) | **15-25m** | 全体が見渡せて迫力がある |
| **プロジェクター** | **20-30m** | 映画館のような臨場感 |

## ⚙️ **Unity Inspector での設定方法**

### **FestivalWaypointManager の設定**

```
Festival Center: 会場の中心点（通常は原点 0,0,0）
Festival Radius: 15          ← 会場の半径（メートル）
Waypoint Count: 9            ← 屋台の数
Auto Create Waypoints: ✓    ← 自動生成ON
```

## 📍 **座標の指定方法**

### **座標系の基本**
```
Unity座標系（上から見た図）:

        Z軸（奥）
         ↑
         │
         │
X軸 ←────┼────→ X軸
（左）    │     （右）
         │
         ↓
        Z軸（手前）

中央広場 = (0, 0, 0)  ※Y軸は高さ（通常0）
```

### **基本的な配置パターン**

#### **シンプル配置（半径10m）**
```csharp
// FestivalWaypointManager.cs の festivalAreas 配列に設定

new FestivalArea { 
    areaName = "Central_Plaza", 
    localPosition = new Vector3(0, 0, 0),      // 中央
    associatedTopics = new[]{"夏祭り", "賑やか"} 
},
new FestivalArea { 
    areaName = "Takoyaki_Stand", 
    localPosition = new Vector3(-7, 0, 5),     // 左上
    associatedTopics = new[]{"たこ焼き", "ソース"} 
},
new FestivalArea { 
    areaName = "Goldfish_Scooping", 
    localPosition = new Vector3(7, 0, 5),      // 右上  
    associatedTopics = new[]{"金魚すくい", "ポイ"} 
},
new FestivalArea { 
    areaName = "Shooting_Gallery", 
    localPosition = new Vector3(-7, 0, -5),    // 左下
    associatedTopics = new[]{"射的", "景品"} 
},
new FestivalArea { 
    areaName = "Cotton_Candy", 
    localPosition = new Vector3(7, 0, -5),     // 右下
    associatedTopics = new[]{"わたあめ", "甘い"} 
}
```

#### **標準配置（半径15m）**
```csharp
new FestivalArea { 
    areaName = "Central_Plaza", 
    localPosition = new Vector3(0, 0, 0)       // 中央広場
},
new FestivalArea { 
    areaName = "Takoyaki_Stand", 
    localPosition = new Vector3(-8, 0, 6)      // 左上の屋台エリア
},
new FestivalArea { 
    areaName = "Cotton_Candy", 
    localPosition = new Vector3(8, 0, 6)       // 右上の屋台エリア
},
new FestivalArea { 
    areaName = "Goldfish_Scooping", 
    localPosition = new Vector3(-6, 0, -8)     // 左下のゲームエリア  
},
new FestivalArea { 
    areaName = "Shooting_Gallery", 
    localPosition = new Vector3(6, 0, -8)      // 右下のゲームエリア
},
new FestivalArea { 
    areaName = "Stage_Front", 
    localPosition = new Vector3(0, 0, 12)      // 奥のステージ
},
new FestivalArea { 
    areaName = "Rest_Area", 
    localPosition = new Vector3(-12, 0, 0)     // 左の休憩所
},
new FestivalArea { 
    areaName = "Drink_Stand", 
    localPosition = new Vector3(12, 0, 0)      // 右のドリンク屋台
},
new FestivalArea { 
    areaName = "Fireworks_Spot", 
    localPosition = new Vector3(0, 0, -15)     // 手前の花火スポット
}
```

## 🎯 **座標の決め方のコツ**

### **1. 対称性を意識**
```
左右対称に配置すると美しい:
左: (-8, 0, 6)  ↔  右: (8, 0, 6)
左: (-12, 0, 0) ↔  右: (12, 0, 0)
```

### **2. 距離感の目安**
```
隣接する屋台間の距離: 5-8m （会話が重ならない）
中央から各屋台までの距離: 8-12m （会場半径の60-80%）
対角線の距離: 10-15m （端から端への移動時間を考慮）
```

### **3. 用途別エリア分け**
```
奥側（Z軸プラス）: ステージ、音楽関係
手前（Z軸マイナス）: 花火スポット、観覧エリア
左右（X軸）: 屋台を左右に分散
中央（0,0,0）: 広場、待ち合わせ場所
```

## 🛠️ **手動でウェイポイントを配置する方法**

### **Option A: コードで指定**
`FestivalWaypointManager.cs` の `festivalAreas` 配列を直接編集

### **Option B: Unityエディタで手動配置**
1. 空のGameObjectを作成
2. 名前を「Waypoint_Takoyaki_Stand」に変更
3. Position を (-8, 0, 6) に設定
4. Tag を「FestivalWaypoint」に設定
5. `FestivalAreaInfo` コンポーネントを追加
6. Area Name に「たこ焼き屋台」を設定

## 📐 **距離と時間の計算**

### **移動時間の計算式**
```
移動時間 = 距離 ÷ 歩行速度

例：
距離10m、歩行速度3.5m/s の場合
移動時間 = 10 ÷ 3.5 = 約3秒
```

### **推奨設定値**
```
baseWalkSpeed: 2.5-4.0m/s  （展示環境に応じて調整）
conversationRadius: 2.0-2.5m  （会話開始距離）
waypointReachDistance: 1.0m    （目標到達判定）
idleTime: 3-8秒              （各地点での待機時間）
```

## 🎪 **会場レイアウト例**

### **にぎやか型（狭い会場）**
```
半径: 10m
配置: 密集型、頻繁な出会い
移動: 5-8秒で到着
会話: 高頻度

  射的    ステージ   わたあめ
    ●   　   ●   　   ●
     ＼     ｜     ／
休憩 ●―――● 中央 ●―――● ドリンク
     ／     ｜     ＼  
    ●       ●       ●
 たこ焼き  花火   金魚すくい
```

### **ゆったり型（広い会場）**
```
半径: 20m
配置: 分散型、のんびり移動
移動: 8-15秒で到着  
会話: 適度な頻度

射的        ステージ前        わたあめ
  ●           ●             ●
    ＼         ｜           ／
      ＼       ｜         ／
休憩所   ● ――――● 中央 ●――――● ドリンク
      ／       ｜         ＼
    ／         ｜           ＼
  ●           ●             ●
たこ焼き     花火スポット      金魚すくい
```

## ⚠️ **注意点**

### **1. NavMesh のベイク範囲**
会場サイズに合わせて NavMesh を正しくベイクする
```
Navigation Window > Bake > Agent Radius: 0.5
Bake する範囲が会場全体をカバーしているか確認
```

### **2. カメラの調整**
会場サイズに応じてカメラの位置・角度も調整が必要
```
小さい会場: カメラを低く、近づける
大きい会場: カメラを高く、遠ざける
```

### **3. パフォーマンス**
```
会場が大きくなるほど処理負荷が上がる可能性
テスト時にFPSを確認して調整
```

## 🎮 **テスト方法**

### **1. 座標確認**
```
F3キー: デバッグ情報表示でキャラの現在座標確認
Scene View: Gizmosでウェイポイント位置を視覚確認
```

### **2. 距離テスト**
```
F2キー: 強制会話開始で距離感をテスト
移動時間が長すぎる/短すぎる場合は会場サイズ調整
```

---

**💡 まずは標準設定（半径15m、9箇所）から始めて、展示環境に合わせて調整することを推奨します！**