# 📺 32インチディスプレイ展示用 微調整ガイド

## 🎯 **現在の設定値（32インチ最適化済み）**

### **会場サイズ**
```
Festival Radius: 12m        ← コンパクトな会場
Waypoint Count: 7箇所       ← 適度な密度
座標配置: 横長レイアウト      ← 1920x1080に最適
```

### **キャラクター動作**
```
Base Walk Speed: 2.8m/s     ← 観察しやすい速度
Personal Space: 1.2m        ← 密度感のある配置
Idle Time: 2-6秒           ← 活発な動き
Conversation Radius: 2.0m   ← 標準的な会話距離
```

## ⚙️ **よくある微調整**

### 1️⃣ **「もっと活発に動いてほしい」場合**

#### **FestivalWaypointManager で調整**
```csharp
festivalRadius = 10f;       // 会場を小さく → 移動時間短縮
```

#### **AdvancedCharacterController で調整**
```csharp  
baseWalkSpeed = 3.2f;       // 歩行速度アップ
idleTimeMin = 1f;           // 待機時間を短く
idleTimeMax = 4f;           // 待機時間を短く
conversationCooldown = 20f; // 会話の間隔を短く
```

### 2️⃣ **「もっとゆっくり観察したい」場合**

#### **FestivalWaypointManager で調整**
```csharp
festivalRadius = 15f;       // 会場を広く → 移動時間延長
```

#### **AdvancedCharacterController で調整**
```csharp
baseWalkSpeed = 2.2f;       // 歩行速度ダウン
idleTimeMin = 4f;           // 待機時間を長く
idleTimeMax = 10f;          // 待機時間を長く
conversationCooldown = 45f; // 会話の間隔を長く
```

### 3️⃣ **「会話をもっと頻繁に」場合**

#### **AdvancedCharacterController で調整**
```csharp
conversationRadius = 2.5f;  // 会話開始距離を広く
conversationCooldown = 15f; // クールダウンを短く
personalSpaceRadius = 1.0f; // 近づきやすく
```

### 4️⃣ **「キャラが重なってしまう」場合**

#### **AdvancedCharacterController で調整**
```csharp
personalSpaceRadius = 1.8f;     // 個人スペースを広く
characterAvoidanceRadius = 2.5f; // 回避距離を広く
```

#### **NavMeshAgent 設定**（Unity Inspector）
```
Agent Radius: 0.7           // エージェント半径を大きく
Avoidance Priority: 10-90   // 優先度をランダムに
```

## 🎨 **ディスプレイ向き別の調整**

### **横型ディスプレイ（1920x1080）- 現在の設定**
```csharp
// 会場レイアウト（横長）
new Vector3(-6, 0, 4)   // 左上: たこ焼き
new Vector3(6, 0, 4)    // 右上: わたあめ
new Vector3(0, 0, 8)    // 奥: ステージ
new Vector3(0, 0, -10)  // 手前: 花火スポット
```

### **縦型ディスプレイ（1080x1920）に変更する場合**
```csharp
// FestivalWaypointManagerのdefaultAreas配列を縦長配置に変更:
new Vector3(0, 0, 10),      // 最奥: ステージ
new Vector3(-3, 0, 6),      // 奥左: たこ焼き
new Vector3(3, 0, 6),       // 奥右: わたあめ
new Vector3(0, 0, 0),       // 中央: 広場
new Vector3(-3, 0, -6),     // 手前左: 金魚すくい
new Vector3(3, 0, -6),      // 手前右: 射的
new Vector3(0, 0, -10)      // 最手前: 花火スポット
```

## 📐 **座標の微調整方法**

### **Inspector での手動調整**
1. FestivalWaypointManager を選択
2. Festival Areas 配列を展開
3. Local Position の値を直接編集

### **よく使う座標パターン**
```
密集型: 座標の数値を小さく（±3～6）
分散型: 座標の数値を大きく（±8～12）
円形配置: 中心からの距離を均等に
格子配置: X,Z座標を規則的に
```

## 🎪 **エリア追加・削除**

### **エリアを追加したい場合**
```csharp
// FestivalWaypointManagerのdefaultAreas配列に追加:
new FestivalArea { 
    areaName = "Ring_Toss", 
    localPosition = new Vector3(-8, 0, 0), 
    associatedTopics = new[]{"輪投げ", "景品"} 
},
```

### **エリアを減らしたい場合**
```csharp
waypointCount = 5;  // 表示するエリア数を制限
```

## 🎯 **会話の調整**

### **会話を長くしたい**
`server/services/dialog_service.py`：
```python
# MAX_TURNS を変更
max_turns = 8  # 6から8に変更
```

### **会話を短くしたい**
```python
max_turns = 4  # 6から4に変更
```

### **会話の内容を調整**
`server/config/locations.json` で各場所の：
- `context_description`: 場所の雰囲気
- `topics`: 話題キーワード
- `sounds`, `smells`: 臨場感

## ⏱️ **タイミング調整の目安**

### **全体のサイクル時間**
```
移動 (3-6秒) + 待機 (2-6秒) + 会話 (18秒) = 約30秒サイクル

速くしたい: 移動・待機時間を短縮
遅くしたい: 移動・待機時間を延長
```

### **画面の活気度**
```
高活気: 短い移動 + 短い待機 + 頻繁な会話
低活気: 長い移動 + 長い待機 + 控えめな会話
```

## 🔧 **設定変更の手順**

### **1. Unity側の設定変更**
1. 該当スクリプトのInspectorで値を変更
2. Playモードで動作確認
3. 問題なければScene保存

### **2. サーバー側の設定変更**  
1. 設定ファイル（.json）を編集
2. サーバー再起動（`python server/app.py`）
3. Unity側で動作確認

### **3. 設定の保存**
```
Unity: シーンファイル保存
サーバー: 設定ファイル保存
文書化: 変更内容をメモに記録
```

## 🎮 **テスト方法**

### **基本テスト**
- F3: デバッグ情報で数値確認
- F2: 強制会話開始で距離感テスト
- F1: リセットして初期状態確認

### **長時間テスト**
1. 5-10分間放置して観察
2. キャラが重なっていないか確認
3. 会話の頻度・内容をチェック
4. 画面端でキャラが見切れていないか確認

## ⚠️ **注意点**

### **やってはいけない調整**
- `characterId` の変更（サーバーとの連携が切れる）
- 座標のY値変更（キャラが空中に浮く）
- 極端な速度設定（0.1や10.0など）

### **推奨しない設定**  
- 会場半径30m以上（移動時間が長すぎる）
- 歩行速度1.0m/s以下（動きが鈍重）
- 待機時間15秒以上（退屈になる）

---

## 🎯 **クイック調整チートシート**

| 要望 | 調整箇所 | 変更値 |
|------|----------|--------|
| **もっと活発に** | baseWalkSpeed | 3.2m/s |
| **もっとゆっくり** | baseWalkSpeed | 2.2m/s |  
| **会話を頻繁に** | conversationRadius | 2.5m |
| **会話を控えめに** | conversationCooldown | 45秒 |
| **密度を上げる** | festivalRadius | 10m |
| **ゆったりと** | festivalRadius | 15m |

**💡 一度に大きく変更せず、0.2-0.5程度ずつ調整することを推奨します！**